<?php

/**
 * @file
 * Main module file.
 */

/**
 * Implements hook_menu().
 */
function mappy_menu() {
  $items['admin/config/content/mappy'] = array(
    'title' => 'Mappy settings',
    'route_name' => 'mappy.settings',
  );

  return $items;
}

/**
 * Implements hook_library_info().
 */
function mappy_library_info() {
  $config = config('mappy.settings');

  $lib['mappy'] = array(
    'js' => array(
      drupal_get_path('module', 'mappy') . '/js/mappy.js' => array(
        'type' => 'setting',
        'data' => array(
          'mappy_location' => drupal_get_path('module', 'mappy'),
          'mappy_google_width' => $config->get('google.width'),
          'mappy_google_height' => $config->get('google.height'),
          'mappy_yandex_width' => $config->get('yandex.width'),
          'mappy_yandex_height' => $config->get('yandex.height'),
        ),
      ),
    ),
    'dependencies' => array(
      array('system', 'jquery'),
      array('system', 'drupal'),
      array('system', 'drupalSettings'),
    ),
  );

  return $lib;
}

/**
 * Implements hook_page_build().
 */
function mappy_page_build(&$page) {
  drupal_add_library('mappy', 'mappy');
}
